shiny::runApp()
runApp()
swiss_covid <- prep_data()
tail(swiss_covid)
install.packages("rvest")
library(rvest)
library(strinr)
h <- read_html("https://opendata.swiss/de/dataset/covid-19-schweiz/resource/d2aa549d-492b-452c-aab3-7c1ced16a98d")
View(h)
library(dplyr)
h %>%
html_nodes("<dt>Zugangs_URL</dt>")
h %>%
html_nodes("Zugangs_URL")
h %>%
html_nodes("Zugangs-URL")
h %>%
html_nodes("Download-URL")
h %>%
html_nodes("<dt>Zugangs-URL</dt>")
h %>%
html_nodes("href")
h %>%
html_nodes(".container additional-info")
h %>%
html_node(".container additional-info")
h %>%
html_node("container additional-info")
library(strinr)
h <- read_html("https://opendata.swiss/de/dataset/covid-19-schweiz/resource/d2aa549d-492b-452c-aab3-7c1ced16a98d")
library(stringr)
h <- read_html("https://opendata.swiss/de/dataset/covid-19-schweiz/resource/d2aa549d-492b-452c-aab3-7c1ced16a98d")
h %>%
html_node("container additional-info")
h %>%
html_node(".entry-content")
h %>%
html_node(".entry-content .container additional-info")
h %>%
html_node(".container additional-info")
h %>%
html_node(".container.additional-info")
h %>%
html_node(".container.additional-info.break-word")
h %>%
html_node(".container.additional-info")
h %>%
html_node(".container.additional-info") %>%
html_name()
h %>%
html_node(".container.additional-info") %>%
head()
h %>%
html_node(".container.additional-info") %>%
html_children()
h %>%
html_node(".container.additional-info") %>%
html_text()
blub <- h %>%
html_node(".container.additional-info") %>%
html_text()
blub <- h %>%
html_node(".container.additional-info") %>%
html_text()
blub[1]
type(blub)
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
to_string()
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
toString()
blub[1]
blub[2]
grep(".csv", blub)
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit()
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("")
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("") %>%
str_replace_all(" ", "") %>%
str_replace_all("\n", "")
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("") %>%
str_replace_all(" ", "")
h <- read_html("https://opendata.swiss/de/dataset/covid-19-schweiz/resource/d2aa549d-492b-452c-aab3-7c1ced16a98d")
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("") %>%
str_replace_all(" ", "")
blub <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("")
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
strsplit("") %>%
grep("https://")
View(blub)
first <- h %>%
html_node(".container.additional-info") %>%
html_text()
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
str_match("https://www.covid.ch/api/data/\\s*(.*=)/sources/COVID19Cases_geoRegion.csv")
first
View(first)
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
str_match("https://www.covid.ch/api/data/\\s*(.*?)/sources/COVID19Cases_geoRegion.csv")
first
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
str_match("https://www.covid.ch/api/data/\\s*(.*?)\\s*/sources/COVID19Cases_geoRegion.csv")
first
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
str_match("https://www.covid.ch/api/data/(.*?)/sources/COVID19Cases_geoRegion.csv")
first
first <- h %>%
html_node(".container.additional-info") %>%
html_text() %>%
str_match("https://www.covid19.admin.ch/api/data/(.*?)/sources/COVID19Cases_geoRegion.csv")
first
?str_match
first[1]
runApp()
swiss_covid %>%
mean()
aggregate(swiss_covid$entries, list(swiss_covid$weekday), FUN=mean)
aggregate(swiss_covid$entries, list(swiss_covid$weekday), FUN=mean)/mean(swiss_covid$enries)
mean(swiss_covid$enries)
mean(swiss_covid$enries, na.rm=T)
mean(swiss_covid$entries, na.rm=T)
aggregate(swiss_covid$entries, list(swiss_covid$weekday), FUN=mean)/mean(swiss_covid$entries)
aggregate(swiss_covid$entries, list(swiss_covid$weekday), FUN=mean)
runApp()
swiss_covid$log_entries <- log(swiss_covid$entries)
library(ggplot2)
swiss_covid %>%
ggplot(aes(x=datum, y=log_entries))
swiss_covid %>%
ggplot(aes(x=datum, y=log_entries)) +
geom_line()
tail(swiss_covid)
swiss_covid <- prep_data()
tail(swiss_covid)
group_by(swiss_covid$entries, list(swiss_covid$weekday))
swiss_covid %>%
group_by(weekday) %>%
mutate(deseasoned=entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(deseasoned=entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(list(weekday)) %>%
mutate(entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(entries/mean(entries))
swiss_covid <- prep_data()
swiss_covid$log_entries <- log(swiss_covid$entries)
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(deseasoned=entries/mean(entries))
swiss_covid$deseasoned %>%
group_by(weekday) %>%
mutate(deseasoned=log_entries/mean(log_entries))
swiss_covid %>%
group_by(weekday) %>%
mutate(deseasoned=log_entries/mean(log_entries))
swiss_covid <- swiss_covid %>%
group_by(weekday) %>%
mutate(deseasoned=log_entries/mean(log_entries))
swiss_covid %>%
ggplot(aes(x=datum, y=deseasoned)) +
geom_point()
swiss_covid %>%
ggplot(aes(x=datum, y=deseasoned)) +
geom_line()
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=deseasoned)) +
geom_line(aes(x=datum, y=log_entries))
swiss_covid <- swiss_covid %>%
#group_by(weekday) %>%
mutate(normalized=log_entries/mean(log_entries))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=deseasoned)) +
geom_line(aes(x=datum, y=normalized))
swiss_covid$normalized == swiss_covid$deseasoned
tail(swiss_covid)
aggregate(swiss_covid$entries, list(swiss_covid$weekday), FUN=mean)
aggregate(swiss_covid$log_entries, list(swiss_covid$weekday), FUN=mean)
log(15152)
log(15152)/7.134291
mean(swiss_covid$log_entries)
log(15152)/6.947057
swiss_covid <- swiss_covid %>%
#group_by(weekday) %>%
mutate(normalized=log_entries/mean(log_entries))
swiss_covid$normalized <- swiss_covid$log_entries/mean(swiss_covid$log_entries)
swiss_covid %>%
ggplot() %>%
geom_line(aes(x=Datum, y=normalized))
swiss_covid %>%
ggplot() %>%
geom_line(aes(x=Datum, y=normalized))
swiss_covid %>%
ggplot() %>%
geom_line(aes(x=Datum, y=normalized))
swiss_covid %>%
ggplot() %>%
geom_line(aes(x=datum, y=normalized))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=normalized))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=normalized)) +
geom_line(aes(x=datum, y=deseasonazied))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=normalized)) +
geom_line(aes(x=datum, y=deseasoned))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=normalized), col="darkseagreen") +
geom_line(aes(x=datum, y=deseasoned))
swiss_covid %>%
ggplot() +
geom_line(aes(x=datum, y=normalized), col="darkseagreen") +
geom_line(aes(x=datum, y=deseasoned), col="purple")
loessMod10 <- loess(deseasoned ~ datum, data=swiss_covid, span = 10)
loessMod10 <- loess(deseasoned ~ datum, data=swiss_covid, span = 0.10)
swiss_covid$index <- 1:nrow(swiss_covid)
loessMod10 <- loess(deseasoned ~ index, data=swiss_covid, span = 0.10)
predict(loessMod10)
predict(loessMod10, 759)
?predict.loess
swiss_covid %>%
ggplot() +
#geom_line(aes(x=datum, y=normalized), col="darkseagreen") +
geom_line(aes(x=datum, y=deseasoned), col="purple")
